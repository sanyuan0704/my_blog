(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{260:function(t,a,e){"use strict";e.r(a);var r=e(0),n=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"_009-http-中如何处理表单数据的提交？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_009-http-中如何处理表单数据的提交？","aria-hidden":"true"}},[t._v("#")]),t._v(" 009: HTTP 中如何处理表单数据的提交？")]),t._v(" "),e("p",[t._v("在 http 中，有两种主要的表单提交的方式，体现在两种不同的"),e("code",[t._v("Content-Type")]),t._v("取值:")]),t._v(" "),e("ul",[e("li",[t._v("application/x-www-form-urlencoded")]),t._v(" "),e("li",[t._v("multipart/form-data")])]),t._v(" "),e("p",[t._v("由于表单提交一般是"),e("code",[t._v("POST")]),t._v("请求，很少考虑"),e("code",[t._v("GET")]),t._v("，因此这里我们将默认提交的数据放在请求体中。")]),t._v(" "),e("h2",{attrs:{id:"application-x-www-form-urlencoded"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#application-x-www-form-urlencoded","aria-hidden":"true"}},[t._v("#")]),t._v(" application/x-www-form-urlencoded")]),t._v(" "),e("p",[t._v("对于"),e("code",[t._v("application/x-www-form-urlencoded")]),t._v("格式的表单内容，有以下特点:")]),t._v(" "),e("ul",[e("li",[t._v("其中的数据会被编码成以"),e("code",[t._v("&")]),t._v("分隔的键值对")]),t._v(" "),e("li",[t._v("字符以"),e("strong",[t._v("URL编码方式")]),t._v("编码。")])]),t._v(" "),e("p",[t._v("如：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 转换过程: {a: 1, b: 2} -> a=1&b=2 -> 如下(最终形式)")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a%3D1%26b%3D2"')]),t._v("\n")])])]),e("h2",{attrs:{id:"multipart-form-data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#multipart-form-data","aria-hidden":"true"}},[t._v("#")]),t._v(" multipart/form-data")]),t._v(" "),e("p",[t._v("对于"),e("code",[t._v("multipart/form-data")]),t._v("而言:")]),t._v(" "),e("ul",[e("li",[t._v("请求头中的"),e("code",[t._v("Content-Type")]),t._v("字段会包含"),e("code",[t._v("boundary")]),t._v("，且"),e("code",[t._v("boundary")]),t._v("的值有浏览器默认指定。例: "),e("code",[t._v("Content-Type: multipart/form-data;boundary=----WebkitFormBoundaryRRJKeWfHPGrS4LKe")]),t._v("。")]),t._v(" "),e("li",[t._v("数据会分为多个部分，每两个部分之间通过分隔符来分隔，每部分表述均有 HTTP 头部描述子包体，如"),e("code",[t._v("Content-Type")]),t._v("，在最后的分隔符会加上"),e("code",[t._v("--")]),t._v("表示结束。")])]),t._v(" "),e("p",[t._v("相应的"),e("code",[t._v("请求体")]),t._v("是下面这样:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('Content-Disposition: form-data;name="data1";\nContent-Type: text/plain\ndata1\n----WebkitFormBoundaryRRJKeWfHPGrS4LKe\nContent-Disposition: form-data;name="data2";\nContent-Type: text/plain\ndata2\n----WebkitFormBoundaryRRJKeWfHPGrS4LKe--\n')])])]),e("h2",{attrs:{id:"小结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#小结","aria-hidden":"true"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),e("p",[t._v("值得一提的是，"),e("code",[t._v("multipart/form-data")]),t._v(" 格式最大的特点在于:"),e("strong",[t._v("每一个表单元素都是独立的资源表述")]),t._v("。另外，你可能在写业务的过程中，并没有注意到其中还有"),e("code",[t._v("boundary")]),t._v("的存在，如果你打开抓包工具，确实可以看到不同的表单元素被拆分开了，之所以在平时感觉不到，是以为浏览器和 HTTP 给你封装了这一系列操作。")]),t._v(" "),e("p",[t._v("而且，在实际的场景中，对于图片等文件的上传，基本采用"),e("code",[t._v("multipart/form-data")]),t._v("而不用"),e("code",[t._v("application/x-www-form-urlencoded")]),t._v("，因为没有必要做 URL 编码，带来巨大耗时的同时也占用了更多的空间。")])])}],!1,null,null,null);a.default=n.exports}}]);